<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hathi Trust Extracted Features Access • hathidy</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Hathi Trust Extracted Features Access">
<meta property="og:description" content="Using the Hathi Trust Extended Features API, retrieve word count data and part of speech data for any of over 17 million books, and parse it in the tidyverse.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">hathidy</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Flu.html">Moving from Hathi Trust records to </a>
    </li>
    <li>
      <a href="articles/Hathidy.html">Getting wordcount data from the Hathi Trust with hathidy</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<p>The HathiTrust has over 17 million books, both in and out of copyright, for which page-level wordcount data is available. This is an R package to load and manipulate page-level wordcount data that the HathiTrust Research Center has made available in R.</p>
<p><strong>Note</strong>: This package only works with <a href="https://wiki.htrc.illinois.edu/pages/viewpage.action?pageId=79069329">version 2.0 of the HTRC extended features released in 2020</a>. If you wish to work with the version 1.0 features or their “pairtree” format, you should install from the <a href="https://github.com/HumanitiesDataAnalysis/hathidy/releases/tag/v1.1">1.1 release.</a></p>
<p>The name is a nod to the <code>tidyverse</code> family of packages on which it is built; the basic format of this package is to return data frames with token, page, and part-of-speech information that can then be used directly with <code>tidyverse</code> packages, and in packages like <code>stylo</code> the same way that <code>tidytext</code> parsing is.</p>
<p>This provides a subset of the tools for working with extended-feature files in the Python package maintained by Peter Organisciak: [<a href="https://github.com/htrc/htrc-feature-reader" class="uri">https://github.com/htrc/htrc-feature-reader</a>]. The goal here is to provide a simple, id-based form of access and caching that works well for exploratory data analysis in classroom and workshop settings.</p>
<div id="installation" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1></div>
<p>Install from github.</p>
<pre class="{r}"><code>if (!require(remotes)) install.packages("remotes")
remotes::install_github("HumanitiesDataAnalysis/hathidy")</code></pre>
</div>
<div id="about" class="section level1">
<h1 class="hasAnchor">
<a href="#about" class="anchor"></a>About</h1>
<p>See <a href="https://humanitiesdataanalysis.github.io/hathidy/articles/Hathidy.html">the vignette</a> for details, and the <a href="https://humanitiesdataanalysis.github.io/hathidy/reference/hathi_counts.html">function definition</a> for the basic API.</p>
<div id="basic-use" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-use" class="anchor"></a>Basic use</h2>
<p>Functionality here is almost entirely through one function: <code>hathi_counts</code>, which takes as an argument one htid or a vector of htids. It returns a tibble object with information about full word counts for the requested book, including pages, parts of speech, and so on.</p>
<p>The extracted features also include a great deal of metadata; any of this can be bound to the frame as well by passing it as an argument.</p>
<p>You can access further metadata given an htid, oclc number, or other identifier using ropensci’s <a href="https://github.com/ropensci/hathi">Hathi package</a>. (<strong>Note–for the time being, this seems not be available on CRAN for the latest versions of R</strong>).</p>
<p>Although this data is fetched by default from the web, I have an opinionated take on how you should store this information; using the Hathi’s stubbytree format. It will nag you to designate a local folder in which to store data; it will also cache Apache Arrow ‘feather’ files there. You can also pass it a filename path directly, but I discourage this practice; Hathi Trust filenames are different than identifiers (for example, every occurence of the character “/” is replaced with “=”), and your life will be easier if you never use the filename system.</p>
<p>One of the goals here is to support reproducible research workflows. One important thing to note is that the details of file storage are not important for reproducible code, so these are handled through calls to set various options.</p>
<p>The most important are:</p>
<ol>
<li>The location of a directory where feature count files are stored. Downloading to this directory happens automatically. By default, this downloading happens to a temporary directory; but this is impolite and unnecessary.</li>
<li>The <em>structure</em> of that directory. Hathi Extended Features and this package use, by default, a system called ‘stubbytree’ in which files are very nested inside folders to avoid overfilling if you have millions of files.</li>
</ol>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://opensource.org/licenses/mit-license.php">MIT</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Ben Schmidt <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Ben Schmidt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
